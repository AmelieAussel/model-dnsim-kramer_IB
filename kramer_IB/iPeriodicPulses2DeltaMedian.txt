%%
% This is basically a copy of iPeriodicPulses.txt, except I've duplicated it
% so I can use it twice in the same population.
% This one generates delta spaced periodic pulses, BROADENED by a factor of
%       10x to represent median nerve input. This broadening is relative to
%       a standard AMPA synaptic input. It represents both dispersion as it
%       travels down the dendrite and also jitter in the synaptic inputs.
%       
%%
% Pulse train properties
PPstim2 = -.1;
PPfreq2 = 4; % in Hz
PPwidth2 = 10; % in ms;     % 10 = 10*1; 10x ampa decay time of 1ms

% Time series properties
T2=T(end); 	    % ms, max simulation duration
dt2=0.01;        % ms, time step duration
PPonset2 = 0;    % ms, onset time
PPoffset2 = Inf;   % ms, offset time

% Aperiodic pulse specification
ap_pulse_num2 = 0;        % The pulse number that should be delayed. 0 for no aperiodicity.
ap_pulse_delay2 = 12.5;  % ms, the amount the spike should be delayed. 0 for no aperiodicity.

kernel_type2 = 2;       % Double exponential
width2_rise2 = 2.5;     % 2.5 = 10*0.25; 10x ampa rise time of .25 ms

s3=getAperiodicPulse(PPfreq2,PPwidth2,T2,dt2,PPonset2,PPoffset2,ap_pulse_num2,ap_pulse_delay2,Npop,kernel_type2,width2_rise2);


Iext(X)=PPstim2*s3(k,:)
current => -Iext(X)

